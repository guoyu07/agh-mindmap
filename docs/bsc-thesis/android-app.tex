\section{Android application}
\label{sec:android-app}

\subsection{Navigation}
\label{subsec:drawing}
The first step in creating an Android application was writing the basic views. According to the project, our application should consist of two "views" -- the first with list of mind maps and the second, with a view of a single map. Both views share an action bar with action buttons(for example: open a file, close a map, add a new map) and application's name and icon, as well as a navigation bar with tabs. 

\subsubsection{Action Bar}
\label{subsubsec:action-bar}
A basic component of most Android applications is an Action Bar. It is one of the most important design elements due to the fact, that most Android applications share it. Due to this consistency, a potential user is instantly familiar with application's basic interface. 

There is a number of things that can be put inside Action Bar, for example search bar, action buttons etc. In our application we added the following components:
\begin{itemize}
	\item Button for importing an existing mind map  from an XMind file (in a main view with list of available maps)
	\item Button for adding a new mind map (in a main view with list of available maps)
	\item Button for closing an opened mind map (in a single map view)
	\item Navigation bar which consists of tabs with opened maps (default tab is a view with list of available maps)
\end{itemize}

We want our application to be runnable even on older Android version, so instead of regular ActionBar libraries we decided to use support libraries, which take care of backward compatibility from 2.x Android versions.

\inlinecode{ActionBarSherlock} is an standalone library designed to simplify the use of the action bar in all versions of Android through a single API. The library will automatically use the native \inlinecode{ActionBar} implementation on Android 4.0 or later\cite{Wharton:2013:sherlock}. Using it is fairly simple -- the main difference is in \inlinecode{ActionBar} classes' and methods' names -- most of them are prefixed with Sherlock (for example: \inlinecode{SherlockActivity, SherlockFragmentActivity, SherlockFragmen} etc.), the same with imports. 

\subsubsection{Multi-directional ScrollView}
\label{subsubsec:action-bar}
Our application' most important feature -- creating mind maps -- requires a convenient way of navigating through a map. It should support multi-directional scrolling. In Android API there is no class which can handle multi directional scrolling. Some classes, like \inlinecode{TextView} or \inlinecode{ListView} have vertical scrolling implemented, but generally, scrolling is handled by two classes extending \inlinecode{android.widget.FrameLayout} -- \inlinecode{HorizontalScrollView} and \inlinecode{ScrollView}. 

In our application we implemented multi-directional scrolling in a class \inlinecode{Horizontal ScrollViewWithPropagation} which extends \inlinecode{HorizontalScrollView}. Inside, there is a \inlinecode{ScrollView} variable. If this inner \inlinecode{ScrollView} is set, we obtain o copy of \inlinecode{MotionEvent}, then we transform this copy in X axis and dispatch to the inner \inlinecode{ScrollView}. In the end, the original \inlinecode{MotionEvent} is handled in \inlinecode{Horizontal ScrollViewWithPropagation}.

\begin{figure}[h]
	\centering
	\missingfigure{\michal{List view screen}}
	\caption{View of mind map list, initial screen.}
	\label{fig:screen-maplist}
\end{figure}

\subsection{Drawing mind maps}
\label{subsec:drawing}
In the next stage of work we focused on
\todo[inline]{\kasia{Describe all stages of implementation here.}}
\todo[inline]{\kasia{Include positioning.}}

\subsection{Creating, editing and removing mind nodes}
\label{subsec:drawing}

\begin{figure}[h]
	\centering
	\missingfigure{\michal{Mind map view screen}}
	\caption{View of mind map.}
	\label{fig:screen-map}
\end{figure}

\subsection{Importing from existing .xmind files}
\label{subsec:import}

\begin{figure}[h]
	\centering
	\missingfigure{\kasia{A file chooser screen}}
	\caption{View of file chooser - importing an existing .xmind file.}
	\label{fig:screen-filechooser}
\end{figure}


\subsection{User interface}
\label{subsec:ui}
\todo[inline]{\kasia{Why we designed UI in such a way.}}