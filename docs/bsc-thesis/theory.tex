\chapter{Theoretical basis}
\label{chap:theory}

\section{The representation of mind maps and XMind files}
\label{sec:xmind}


Mind maps are proved to be one of the best ways of organising ideas, brainstorming and dealing with information overload. The research conducted by a Nobel prize winning scientist Dr. Roger Sperry shows that the activities which integrate the functions of two brain hemispheres are the most effective. Left hemisphere is responsible for logical thinking, writing, analysing and details, while the right one - for imagination, colors, spatial memory, recognizing shapes and seeing the whole picture. He also proved that when one hemisphere is overloaded, the second 'falls asleep'. So in order to work efficiently, one must engage both hemispheres -- neither pure logic nor sole creativity would do the trick. Mindmapping uses a whole variety of activities associated with both hemispheres, thus enhancing overall effectiveness and productivity.

There are many available programs for mindmapping. Among commercial solutions, the most popular software is Mindjet MindManager and iMindMap. Free software includes XMind, FreeMind and MindMeister. there is also a number of Web Applications. The basis for our representation of a mind map is an open source tool, XMind. A single mind map starts with a blank sheet, which is then filled with data. The most important part of a map is the central idea, the root topic.  Along with the development of a map more subtopics can be added, creating relationships between each other, a connected, nodal structure. XMind files (workbooks) are saved as an archive of mostly .xml files, of which two are the most important and required to save a map. First, \inlinecode{content.xml} stores data and its hierarchy, and the second, \inlinecode{META-INF/manifest.xml} is the list of files included in the archive. An XMind file could also contain separate .xml documents for content and styles, a .jpg image file for thumbnails, and directories for related attachments. In our application we will implement importing and exporting xmind files.

\section{Android application}
\label{androidsdk}


Android is a Linux system in which each application is a different user. Every Android application runs in isolation from others - as a separate Linux process with its own virtual machine, thus implementing the principle of least privilege. However,  there are ways to communicate with other applications or device features (like camera, extra storage, Bluetooth etc.). In fact, it is considered to be unique for Android architecture that every application can start an activity of other application.

Every android application is built using four basic types of components: activities, services, content providers, and broadcast receivers, each having its own lifecycle which defines how the component is created and destroyed. An activity is usually describes as a single 'screen' with user interface, an application consists of many activities which are independent from each other. A service runs in the background, within the main thread. It can be started by another component which then could bind to it in, thus communicating with it. A content provider deals with application data, it encapsulates the data and provides an interface for managing it. A broadcast receiver  listens and responds to system messages and notifications. All types of components except content providers can be activated by and asynchronous message- an intent. A content provider is activated by a request from a ContentResolver.

In order to start an application, Android system must know its components in the \inlinecode{manifest.xml} file. It takes care of a number of things: it declares API information (supported version(s) of Android system), hardware requirements and other libraries from outside the SDK which are used in the application. An Android SDK generally uses quite a lot of \inlinecode{.xml} files. It provides reusable layouts with a detailed declaration of the user interface and creates a handy way of declaring resources used in the application.

\section{Lift and collaboration}
\label{lift}


The language we chose for this program is Scala -- a multi paradigm, object-functional programming language. It compiles to Java bytecodes, so it offers full compatibility with Android SDK, making the code more elegant and robust. Lift is a web framework written in Scala. In this project, it is used only as a backend for the mobile application that enables all mobile devices with the app installed to share maps and collaborate on them. Several REST web services are implemented; these are internally (server-side) asynchronously managed by a pile of very light-weight Scala actors. It is a main concurrency construct used in Scala.

Actors could be think of as concurrent processes which communicate by sending messages. Each connected mobile device gets its own actor and instant bidirectional communication between devices is achieved by means of long-polling: mobile app initiates a connection with a REST service which does not respond until its actor receives a message from another actor.
